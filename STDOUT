@AcmOrchPost_Regression @AcCreateByAgent
Feature: Testing Create Account by Agent - Orchestration Micro Services
  As a tester, I should be able to Create Customer's Account by Dealer using Account Creation Micro service exposed from the Orchestration layer.
  i.e. Identity in Azure and profile in OCPR.

  @acm_smoke @AcmOrchPost_smoke @AcCreateByAgent-Smoke
  Scenario Outline: Create a new Customer's Account by Agent with Account Creation API exposed from Orchestration layer using valid input parameters (headers + body) and expect status code 201 OK and appropriate response payload <scenarioName> # AccountManagement/AccountCreationByAgent_ORCH_POST.feature:7
    Given Tester calls the Create Customer Account POST api at "<basePath>"
    And Tester uses the headers with ContentType "<ContentType>" XBRAND "<XBRAND>" XCHANNEL "<XCHANNEL>" XCORRELATIONID "<XCORRELATIONID>" Authorization "<Authorization>"
    When Tester post the service with json body having customerType "<customerType>" firstName "<firstName>" lastName "<lastName>" email "<email>" phone "<phone>"
    Then the customer account should be successfully created in the Azure and OCPR systems by returning Status code "<statusCode>"
    And the server returns ResponseCode "<responseCode>" Description "<description>"
    And the response payload must match with the request payload for customerType "<customerType>" firstName "<firstName>" lastName "<lastName>" email "<email>" phone "<phone>" and GUID is not NULL or Empty

    Examples: 

  @acm_smoke @AcmOrchPost_smoke @AcmOrchPost_Regression @AcCreateByAgent @AcCreateByAgent-Smoke
  Scenario Outline: Create a new Customer's Account by Agent with Account Creation API exposed from Orchestration layer using valid input parameters (headers + body) and expect status code 201 OK and appropriate response payload with Toyota TMNA_AGENT # AccountManagement/AccountCreationByAgent_ORCH_POST.feature:17
    Given Tester calls the Create Customer Account POST api at "/v1/account"                                                                                                                                                                                # CreateAndActivateCustomerAccount.tester_calls_the_Create_Customer_Account_POST_api_at(String)
    And Tester uses the headers with ContentType "application/json" XBRAND "T" XCHANNEL "TMNA_AGENT" XCORRELATIONID "sendThroughCode" Authorization "icZBMDlw2XOtuTLIZkfeFi1vTE8QXr4lr8tA6b7t"                                                              # CreateAndActivateCustomerAccount.tester_uses_the_headers_with_ContentType_XBRAND_XCHANNEL_XCORRELATIONID_Authorization(String,String,String,String,String)
    When Tester post the service with json body having customerType "PERSON" firstName "TFname" lastName "TLname" email "sendThroughCode" phone "sendThroughCode"                                                                                           # CreateAndActivateCustomerAccount.tester_post_the_service_with_json_body_having_customerType_firstName_lastName_email_phone(String,String,String,String,String)
    Then the customer account should be successfully created in the Azure and OCPR systems by returning Status code "201"                                                                                                                                   # CreateAndActivateCustomerAccount.the_customer_account_should_be_successfully_created_in_the_Azure_and_OCPR_systems_by_returning_Status_code(int)
    And the server returns ResponseCode "ORCH-0000" Description "Account Created Successfully"                                                                                                                                                              # CreateAndActivateCustomerAccount.the_server_returns_ResponseCode_Description(String,String)
    And the response payload must match with the request payload for customerType "PERSON" firstName "TFname" lastName "TLname" email "sendThroughCode" phone "sendThroughCode" and GUID is not NULL or Empty                                               # CreateAndActivateCustomerAccount.the_response_payload_must_match_with_the_request_payload_for_customerType_firstName_lastName_email_and_GUID_is_not_NULL_or_Empty(String,String,String,String,String)

  @acm_smoke @AcmOrchPost_smoke @AcmOrchPost_Regression @AcCreateByAgent @AcCreateByAgent-Smoke
  Scenario Outline: Create a new Customer's Account by Agent with Account Creation API exposed from Orchestration layer using valid input parameters (headers + body) and expect status code 201 OK and appropriate response payload with Lexus CA_AGENT # AccountManagement/AccountCreationByAgent_ORCH_POST.feature:18
    Given Tester calls the Create Customer Account POST api at "/v1/account"                                                                                                                                                                             # CreateAndActivateCustomerAccount.tester_calls_the_Create_Customer_Account_POST_api_at(String)
    And Tester uses the headers with ContentType "application/json" XBRAND "L" XCHANNEL "CA_AGENT" XCORRELATIONID "sendThroughCode" Authorization "icZBMDlw2XOtuTLIZkfeFi1vTE8QXr4lr8tA6b7t"                                                             # CreateAndActivateCustomerAccount.tester_uses_the_headers_with_ContentType_XBRAND_XCHANNEL_XCORRELATIONID_Authorization(String,String,String,String,String)
    When Tester post the service with json body having customerType "PERSON" firstName "TFname" lastName "TLname" email "sendThroughCode" phone "sendThroughCode"                                                                                        # CreateAndActivateCustomerAccount.tester_post_the_service_with_json_body_having_customerType_firstName_lastName_email_phone(String,String,String,String,String)
    Then the customer account should be successfully created in the Azure and OCPR systems by returning Status code "201"                                                                                                                                # CreateAndActivateCustomerAccount.the_customer_account_should_be_successfully_created_in_the_Azure_and_OCPR_systems_by_returning_Status_code(int)
    And the server returns ResponseCode "ORCH-0000" Description "Account Created Successfully"                                                                                                                                                           # CreateAndActivateCustomerAccount.the_server_returns_ResponseCode_Description(String,String)
    And the response payload must match with the request payload for customerType "PERSON" firstName "TFname" lastName "TLname" email "sendThroughCode" phone "sendThroughCode" and GUID is not NULL or Empty                                            # CreateAndActivateCustomerAccount.the_response_payload_must_match_with_the_request_payload_for_customerType_firstName_lastName_email_and_GUID_is_not_NULL_or_Empty(String,String,String,String,String)
